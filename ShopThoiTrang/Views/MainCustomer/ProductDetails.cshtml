@model IEnumerable<ShopThoiTrang.Models.SanPham>

@{
    ViewBag.Title = "ShowHome";
    Layout = "~/Views/Share/LayoutPage_Customer.cshtml";
}



<!-- Header end -->
<!-- Carousel -->
<div class="carousel_box">
    <div id="demo" class="carousel slide" data-bs-ride="carousel">

        <!-- Indicators/dots -->
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#demo" data-bs-slide-to="0" class="active"></button>
            <button type="button" data-bs-target="#demo" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#demo" data-bs-slide-to="2"></button>
        </div>

        <!-- The slideshow/carousel -->
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="~/Image/image_Banner/banner_2.jpg" alt="Los Angeles" class="d-block w-100">
            </div>
            <div class="carousel-item">
                <img src="~/Image/image_Banner/Banner_1.jpg" alt="Chicago" class="d-block w-100">
            </div>
            <div class="carousel-item">
                <img src="~/Image/image_Banner/Banner_SanPham_3.jpg" alt="New York" class="d-block w-100">
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#demo" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#demo" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
            </button>
        </div>

        <!-- Left and right controls/icons -->

    </div>
</div>
<!-- content -->

<div class="container">
    <div class="text">
        <br><br>
        <h1 class="text-1">ABVN MENU</h1>
        <h1 class="text-2">SẢN PHẨM NỔI BẬT</h1>
        <div class="icon-home"></div>
    </div>

    <div class="row">
        @foreach (var product in Model)
        {

            <div class="col-lg-3 col-md-4 col-sm-6 col-6">
                <div class="course-item-menu">
                    @if (ViewBag.Images != null && ViewBag.Images.ContainsKey(product.MaSP)) // kiểm tra xem có hình ảnh hay ko . ko được bỏ if này bỏ là nó báo lõi
                    {
                        var images = ViewBag.Images[product.MaSP] as List<ShopThoiTrang.Models.HinhAnh>; // gọi và gán models hình ảnh 
                        if (images != null && images.Any())
                        {
                            int imageCount = 0;
                            foreach (var image in images.Take(2)) // for lấy 2 hình ảnh đầu tiên
                            {
                                if (imageCount == 0)
                                {
                                    <div class="box"><img src="~/Image/@image.hinhanh1" alt=""></div> //hinh 1
                                }
                                else if (imageCount == 1)
                                {
                                    <div class="box_2"><img src="~/Image/@image.hinhanh1" alt=""></div> //hinh 2
                                }
                                imageCount++;
                            }
                            if (imageCount < 2) 
                            {
                                <p>Chỉ có một hình ảnh cho sản phẩm này.</p>
                            }
                        }
                        else 
                        {
                            <p>Không có hình ảnh nào cho sản phẩm này.</p>
                        }
                    }
                    else
                    {
                        <p>Không có hình ảnh nào cho sản phẩm này.</p>
                    }
                <div class="box__item">
                    <a href="#muaaaangay">
                        <div class="btn_buy">
                            <p>MUA NGAY</p>
                        </div>
                    </a>
                    <a href="#xemchitiet">
                        <div class="btn_add">
                            <p>XEM CHI TIẾT</p>
                        </div>
                    </a>
                    
                </div>

                    <div class="box__product">
                        <div class="box__color">
                            <div class="color_1"></div>
                            <div class="color_2"></div>
                        </div>
                        <div class="text_product">
                            <p class="product_name">@product.TenSP</p>
                            <p class="product_money">@product.Gia</p>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>